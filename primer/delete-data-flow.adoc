---
permalink: primer/delete-data-flow.html 
sidebar: sidebar 
keywords: object, delete, deletion, object lock, bucket lifecycle, expiration, ilm, placement instruction 
summary: Todas las copias de objetos se eliminan del sistema StorageGRID cuando un cliente o inquilino realiza una operación de eliminación o cuando expira la vida útil del objeto, lo que activa su eliminación automática.  Hay un flujo de datos definido para la eliminación de objetos. 
---
= Eliminar flujo de datos
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Todas las copias de objetos se eliminan del sistema StorageGRID cuando un cliente realiza una operación de eliminación o cuando expira la vida útil del objeto, lo que activa su eliminación automática.  Hay un flujo de datos definido para la eliminación de objetos.



== Jerarquía de eliminación

StorageGRID proporciona varios métodos para controlar cuándo se conservan o eliminan los objetos.  Los objetos se pueden eliminar a petición del cliente o de forma automática.  StorageGRID siempre prioriza cualquier configuración de bloqueo de objetos S3 sobre las solicitudes de eliminación del cliente, que tienen prioridad sobre el ciclo de vida del bucket S3 y las instrucciones de ubicación de ILM.

* *Bloqueo de objetos S3*: si la configuración global de Bloqueo de objetos S3 está habilitada para la cuadrícula, los clientes S3 pueden crear depósitos con el Bloqueo de objetos S3 habilitado y luego usar la API REST de S3 para especificar las configuraciones de retención hasta la fecha y retención legal para cada versión de objeto agregada a ese depósito.
+
** Una versión de un objeto que se encuentra bajo retención legal no se puede eliminar mediante ningún método.
** Antes de que se alcance la fecha de conservación de una versión de un objeto, esa versión no se puede eliminar mediante ningún método.
** Los objetos en depósitos con el bloqueo de objetos S3 habilitado son retenidos por ILM "para siempre".  Sin embargo, una vez alcanzada su fecha de retención, una versión de un objeto puede eliminarse mediante una solicitud del cliente o mediante la expiración del ciclo de vida del depósito.
** Si los clientes S3 aplican una fecha de retención hasta predeterminada al depósito, no necesitan especificar una fecha de retención hasta para cada objeto.


* *Solicitud de eliminación de cliente*: Un cliente S3 puede emitir una solicitud de eliminación de objeto.  Cuando un cliente elimina un objeto, se eliminan todas las copias del objeto del sistema StorageGRID .
* *Eliminar objetos en el depósito*: los usuarios de Tenant Manager pueden usar esta opción para eliminar de forma permanente todas las copias de los objetos y las versiones de objetos en los depósitos seleccionados del sistema StorageGRID .
* *Ciclo de vida del bucket S3*: los clientes S3 pueden agregar una configuración de ciclo de vida a sus buckets que especifique una acción de vencimiento.  Si existe un ciclo de vida de depósito, StorageGRID elimina automáticamente todas las copias de un objeto cuando se cumple la fecha o la cantidad de días especificada en la acción Vencimiento, a menos que el cliente elimine el objeto primero.
* *Instrucciones de ubicación de ILM*: Suponiendo que el bucket no tiene habilitado el bloqueo de objetos S3 y que no hay un ciclo de vida del bucket, StorageGRID elimina automáticamente un objeto cuando finaliza el último período de tiempo en la regla de ILM y no hay más ubicaciones especificadas para el objeto.
+

NOTE: Cuando se configura un ciclo de vida de un bucket S3, las acciones de vencimiento del ciclo de vida anulan la política ILM para los objetos que coinciden con el filtro del ciclo de vida.  Como resultado, un objeto podría permanecer en la cuadrícula incluso después de que hayan transcurrido las instrucciones ILM para colocar el objeto.



Ver link:../ilm/how-objects-are-deleted.html["Cómo se eliminan los objetos"] Para más información.



== Flujo de datos para eliminaciones de clientes

image::../media/delete_data_flow.png[Flujo de datos de eliminación de cliente]

. El servicio LDR recibe una solicitud de eliminación de la aplicación cliente.
. El servicio LDR actualiza el almacén de metadatos para que el objeto parezca eliminado ante las solicitudes del cliente y le indica al motor ILM que elimine todas las copias de los datos del objeto.
. El objeto se elimina del sistema.  El almacén de metadatos se actualiza para eliminar los metadatos del objeto.




== Flujo de datos para eliminaciones de ILM

image::../media/automatic_deletion_data_flow.png[Flujo de datos de eliminación automática]

. El motor ILM determina que es necesario eliminar el objeto.
. El motor ILM notifica al almacén de metadatos.  El almacén de metadatos actualiza los metadatos del objeto para que el objeto parezca eliminado ante las solicitudes del cliente.
. El motor ILM elimina todas las copias del objeto.  El almacén de metadatos se actualiza para eliminar los metadatos del objeto.

